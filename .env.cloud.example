# Boomi MCP Cloud Server Configuration
# Copy this file to .env.cloud and configure for your environment

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
MCP_HOST=0.0.0.0
MCP_PORT=8000
MCP_PATH=/mcp
LOG_LEVEL=info

# Number of workers (can use multiple with GCP Secret Manager)
WORKERS=1

# CORS origins (comma-separated)
CORS_ORIGINS=*

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# Enable OAuth 2.0 / OIDC authentication (STRONGLY RECOMMENDED for production)
# Set to "false" to use JWT authentication (not recommended - for testing only)
OAUTH_ENABLED=true

# --- OAuth 2.0 Configuration (Production) ---
# Choose one provider: google, auth0, azure, cognito, okta, github, generic
OIDC_PROVIDER=google

# OAuth Client Credentials (obtain from your Identity Provider)
# IMPORTANT: Store these securely! Use GCP Secret Manager, AWS Secrets Manager, or Azure Key Vault
OIDC_CLIENT_ID=your-client-id-here
OIDC_CLIENT_SECRET=your-client-secret-here

# Public URL of this server (MUST match OAuth redirect URI configuration in your IdP)
# For Cloud Run: https://your-service-name-abc123-uc.a.run.app
# For custom domain: https://your-domain.com
OIDC_BASE_URL=https://boomi-mcp-server-htwgwv3mxq-uc.a.run.app

# Provider-specific settings (uncomment based on OIDC_PROVIDER):

# --- For Google (Recommended for GCP deployments) ---
# 1. Go to https://console.cloud.google.com/apis/credentials
# 2. Create OAuth 2.0 Client ID (Web application)
# 3. Add authorized redirect URI: {OIDC_BASE_URL}/auth/callback
# 4. Copy Client ID and Secret to OIDC_CLIENT_ID and OIDC_CLIENT_SECRET
# No additional settings needed

# --- For Auth0 ---
# OIDC_DOMAIN=your-tenant.auth0.com

# --- For Azure AD (Microsoft Entra ID) ---
# OIDC_TENANT_ID=your-tenant-id

# --- For AWS Cognito ---
# OIDC_REGION=us-east-1
# OIDC_USER_POOL_ID=us-east-1_abc123
# OIDC_COGNITO_DOMAIN=your-app.auth.us-east-1.amazoncognito.com

# --- For Okta ---
# OIDC_DOMAIN=your-domain.okta.com

# --- For GitHub ---
# No additional settings needed

# --- For Generic OAuth Provider ---
# OIDC_AUTHORIZATION_ENDPOINT=https://idp.example.com/oauth2/authorize
# OIDC_TOKEN_ENDPOINT=https://idp.example.com/oauth2/token
# OIDC_JWKS_URI=https://idp.example.com/.well-known/jwks.json
# OIDC_ISSUER=https://idp.example.com

# --- JWT Configuration (Fallback - NOT RECOMMENDED for production) ---
# Only used if OAUTH_ENABLED=false
# MCP_JWT_ALG=HS256
# MCP_JWT_SECRET=your-secret-key-here
# MCP_JWT_ISSUER=https://local-issuer
# MCP_JWT_AUDIENCE=boomi-mcp

# For JWT with RS256 (if you must use JWT):
# MCP_JWT_ALG=RS256
# MCP_JWT_JWKS_URI=https://your-tenant.auth0.com/.well-known/jwks.json
# MCP_JWT_ISSUER=https://your-tenant.auth0.com/
# MCP_JWT_AUDIENCE=your-api-identifier

# =============================================================================
# CREDENTIAL STORAGE BACKEND
# =============================================================================

# Backend type: gcp, aws, azure (GCP is default)
SECRETS_BACKEND=gcp

# --- GCP Secret Manager (Default/Production) ---
GCP_PROJECT_ID=your-gcp-project-id
GCP_SECRET_PREFIX=boomi-mcp-
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# --- AWS Secrets Manager (Alternative) ---
# AWS_REGION=us-east-1
# AWS_SECRET_PREFIX=boomi-mcp/
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# --- Azure Key Vault (Alternative) ---
# AZURE_KEY_VAULT_URL=https://your-vault.vault.azure.net/
# AZURE_SECRET_PREFIX=boomi-mcp-
# AZURE_TENANT_ID=your-tenant-id
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret

# =============================================================================
# BOOMI CREDENTIALS (Optional - for auto-configuration)
# =============================================================================
# These credentials are used as fallback when users haven't stored their own
# credentials. Useful for testing and demos.

# BOOMI_ACCOUNT=your-account-id
# BOOMI_USER=BOOMI_TOKEN.your-email@example.com
# BOOMI_SECRET=your-api-token

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================

# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn

# OpenTelemetry configuration
# OTEL_EXPORTER_OTLP_ENDPOINT=https://your-otel-collector:4317
# OTEL_SERVICE_NAME=boomi-mcp-server

# =============================================================================
# DEPLOYMENT PLATFORM SPECIFIC
# =============================================================================

# --- Google Cloud Run ---
# PORT=8080
# K_SERVICE=boomi-mcp-server
# K_REVISION=boomi-mcp-server-001
# K_CONFIGURATION=boomi-mcp-server

# --- AWS ECS/Fargate ---
# AWS_EXECUTION_ENV=AWS_ECS_FARGATE
# ECS_CONTAINER_METADATA_URI_V4=http://169.254.170.2/v4

# --- Azure Container Apps ---
# CONTAINER_APP_NAME=boomi-mcp-server
# CONTAINER_APP_REVISION=boomi-mcp-server--001

# =============================================================================
# SECURITY & RATE LIMITING (Optional)
# =============================================================================

# Request rate limiting (requests per minute per user)
# RATE_LIMIT_PER_USER=100

# Maximum concurrent connections
# MAX_CONCURRENT_CONNECTIONS=1000

# Request timeout (seconds)
# REQUEST_TIMEOUT=30
